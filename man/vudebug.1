.\" Copyright (C) 2019 VirtualSquare. Project Leader: Renzo Davoli
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License,
.\" as published by the Free Software Foundation, either version 2
.\" of the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 51 Franklin St, Fifth Floor, Boston,
.\" MA 02110-1301 USA.
.\"
.\" Automatically generated by Pandoc 2.17.1.1
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "VUDEBUG" "1" "December 2022" "VirtualSquare-VUOS" "General Commands Manual"
.hy
.SH NAME
.PP
\f[V]vudebug\f[R] \[en] debug utility for umvu
.SH SYNOPSIS
.PP
\f[V]vudebug\f[R] \[en]help
.PP
\f[V]vudebug\f[R] [\f[I]debarg\f[R] [\f[I]debarg\f[R] \&...]] [ \[en]
\f[I]command\f[R] [\f[I]args\f[R]]]
.PP
where \f[I]debarg\f[R] has the following syntax:
.PP
\f[V]+\f[R][\f[I]tag\f[R][\f[I]tag\f[R]
\&...]][\f[V]:\f[R]\f[I]colorspec\f[R]]
.PP
or
.PP
\f[V]-\f[R][\f[I]tag\f[R][\f[I]tag\f[R] \&...]]
.PP
or
.PP
\f[V]?\f[R][\f[I]tag\f[R][\f[I]tag\f[R] \&...]]
.PP
and \f[I]colorspec\f[R] is a combination of the following characters:
\f[V]nwrgbcmyNWRGBCMY+-_*#\f[R]
.SH DESCRIPTION
.PP
vudebug enables or disables debug log messages.
Log messages are classified into categories.
Each category is identified by a \f[I]tag\f[R] (one alphanumeric
character).
By convention lowercase letters are for logging messages of the
hypervisor, while capital letters are for modules.
.PP
When \f[V]vudebug\f[R] command line ends with \f[V]--\f[R] followed by a
command and its command line arguments, logging is enabled for the
execution of that command (and for all the subprocesses it eventually
creates).
Otherwise \f[V]vudebug\f[R] changes the categories to log globally, for
all the processes.
.SH OPTIONS
.TP
\f[V]--help\f[R]
Print a short help message and exit.
.TP
\f[I]debarg\f[R]
each debug argument begins by \f[V]+\f[R], \f[V]-\f[R] or \f[V]?\f[R]
followed by zero, one or more
debug tags.
(\f[V]+\f[R] enables log messages, \f[V]-\f[R] disables log messages,
\f[V]?\f[R] check if the
log messages are enabled).
When the debug argument has no tags, it is applied to all
the tags.
Log messages of different categories can be shown in different colors
and font effects.
When \f[V]vudebug\f[R] is used to enable/re-enable tags (\f[V]+\f[R])
each \f[I]debarg\f[R] can be followed by a
semicolon (\f[V]:\f[R]) and a color specification.
A color specification is a string composed by the
following characters:
.TP
\f[V]\f[R]
\f[V]n w r g b c m y\f[R]: set foreground color (black, white, red,
green, blue, cyan, magenta or yellow)
.TP
\f[V]\f[R]
\f[V]N W R G B C M Y\f[R]: set background color (black, white, red,
green, blue, cyan, magenta or yellow)
.TP
\f[V]\f[R]
\f[V]+ - _ * #\f[R]: font effect (bright, dim,underlined, blinking,
reverse video).
.SH EXAMPLES
.PP
Get a list of available logging categories:
.IP
.nf
\f[C]
$ vudebug ?
D -   VUDEV
F -   VUFUSE
N -   VUNET
a -   ACTION
c -   CHOICE
f -   FILETABLE
m -   MODULE
n -   NESTED
p -   PATH
s -   SYSCALL
v -   VNODE
\f[R]
.fi
.PP
the list may vary depending on the version of the hypervisor and the
modules currently loaded.
.PP
Enable path resolution logging:
.IP
.nf
\f[C]
$ vudebug +p
\f[R]
.fi
.PP
List some categories to see which ones are active:
.IP
.nf
\f[C]
$ vudebug ?ps
p +   PATH
s -   SYSCALL
\f[R]
.fi
.PP
PATH is active, SYSCALL is not active.
.PP
Disable all the categories:
.IP
.nf
\f[C]
$ vudebug -
\f[R]
.fi
.PP
Launch a bash and log syscall requests in red, path resolution in
bold-blue, module choice in reverse green:
.IP
.nf
\f[C]
$ vudebug +s:r +p:b+ +c:g# -- bash
\f[R]
.fi
.SH SEE ALSO
.PP
umvu(1)
.SH AUTHOR
.PP
VirtualSquare.
Project leader: Renzo Davoli
